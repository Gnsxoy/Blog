---
title: JS - ç±»å‹è½¬æ¢
date: 2024-07-21
lastUpdated: 2024-07-21
---

# `JS` - ç±»å‹è½¬æ¢

> `JS` ä¸­çš„åŸºç¡€ç±»å‹å’Œå¼•ç”¨ç±»å‹è¯´æ˜ï¼Œä»¥åŠç±»å‹è½¬æ¢çš„ç›¸å…³è¯´æ˜ã€‚

## åŸå§‹ç±»å‹ & å¼•ç”¨ç±»å‹

### åŸå§‹ç±»å‹

- **åŸå§‹ç±»å‹çš„å€¼æ˜¯ä¸å¯æ”¹å˜çš„ã€‚**

  ```js
  let a = "abc";
  a[1] = "a";
  alert(a); // abc
  ```

- **å­—ç¬¦ä¸²çš„æ“ä½œæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè€Œä¸ä¼šæ”¹å˜åŸå§‹å­—ç¬¦ä¸²ã€‚**

  ```js
  let s = "ABC";
  s.toLowerCase("");
  alert(s); // ABC
  ```

- **åŸå§‹ç±»å‹çš„æ¯”è¾ƒï¼Œæ¯”è¾ƒçš„æ˜¯å®ƒä»¬çš„å€¼ã€‚**

  ```js
  let n1 = 123,
    	n2 = Number(123);
  console.log(n1 === n2); // true
  ```

### å¼•ç”¨ç±»å‹

- **å¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚**

  ```js
  let o = { x: 1 };
  o.x = 2;
  o.y = 3;
  console.log(o); // { x: 2, y: 3 }
  delete o.x;
  console.log(o); // { y: 3 }
  ```

- **å¼•ç”¨ç±»å‹çš„æ¯”è¾ƒå®é™…ä¸Šæ˜¯æ¯”è¾ƒå®ƒä»¬çš„å¼•ç”¨åœ°å€ï¼Œè€Œä¸æ˜¯å†…å®¹ã€‚**

  ```js
  let o1 = { x: 2 },
  	  o2 = { x: 2 };
  console.log(o1 === o2); // false
  ```

  **å½“ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ä¸ºå¯¹è±¡æ—¶ï¼Œè¯¥å˜é‡ä¿å­˜çš„æ˜¯è¯¥å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚**

  **å¼•ç”¨ç±»å‹çš„æ¯”è¾ƒæ˜¯åœ¨æ¯”è¾ƒå¼•ç”¨åœ°å€ï¼š å½“ä¸”ä»…å½“å®ƒä»¬çš„å¼•ç”¨æ˜¯åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒä»¬æ‰ç›¸ç­‰ï¼ˆå†…å­˜åœ°å€ç›¸ç­‰ï¼‰ã€‚**

  ```js
  let x1 = { s: 1 };
  let x2 = x1;
  x2.y = 1;
  console.log(x1 === x2); // true;
  ```

## ç±»å‹è½¬æ¢

```js
let a = "5" + "2"; // '52'
let b = "5" - "2"; // 3

let a = "" - 1; // -1
let b = true + false; // 1
let c = null + 1; // 1
let d = undefined + 1; // NaN âš ï¸
let e = [] + []; // "" âš ï¸
```

### è½¬å­—ç¬¦ä¸²

**ç»å¸¸å‡ºç°åœ¨ `+` è¿ç®—ç¬¦ä¸­ï¼Œå¹¶ä¸”å…¶ä¸­æœ‰ä¸€ä¸ªæ“ä½œæ•°ï¼Œä¸æ˜¯æ•°å€¼ç±»å‹ã€‚**

```js
let s = 4 + "px" + 5; // 4px5
s = 123e-2 + "a"; // 123e-2a
```

### è½¬æ•°å€¼

ç»å¸¸å‡ºç°åœ¨ æ•°å­¦è¿ç®— ä¸­ï¼Œ**è¡¨ç¤ºé“¾æ¥å­—ç¬¦ä¸²çš„ `+` è¿ç®—ç¬¦é™¤å¤–ã€‚**

```js
let s = "abc"; // +s -> NaN âš ï¸  / -s -> NaN âš ï¸
s = " 123 "; // +s -> 123 âš ï¸ / -s -> -123 âš ï¸
```

### è½¬å¸ƒå°”

**ç»å¸¸å‡ºç°åœ¨ `if` è¯­å¥ï¼Œé€»è¾‘è¿ç®—ä¸­ã€‚**

```js
let s = "abc";
if (s) console.log(s); // 'abc'
console.log(!!s); // true
```

### ç›¸ç­‰

**`==` å…ƒç®—ç¬¦ä¼šæœ‰ç±»å‹è½¬æ¢ï¼Œ`===` è¿ç®—ç¬¦ä¸ä¼šè¿›è¡Œç±»å‹è½¬æ¢ã€‚**

```js
console.log(null == undefined); // ç›¸ç­‰
console.log("0" == 0); // åœ¨æ¯”è¾ƒä¹‹å‰ å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—
console.log(0 == false); // åœ¨æ¯”è¾ƒä¹‹å‰ å¸ƒå°”è½¬åŒ–æˆæ•°å­—
console.log("0" == false); // åœ¨æ¯”è¾ƒä¹‹å‰ å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼éƒ½è½¬æ¢æˆæ•°å­—
```

### ç±»å‹è½¬æ¢`Table`

> `\` ä»£è¡¨çš„æ˜¯ æœ¬èº«å°±æ˜¯è¿™ä¸ªç±»å‹

| å€¼                        | è½¬å­—ç¬¦ä¸²         | è½¬æ•°å€¼ | è½¬å¸ƒå°”  | è½¬å¯¹è±¡                  |
| ------------------------- | ---------------- | ------ | ------- | ----------------------- |
| `undefined`               | `'undefined'`    | `NaN`  | `false` | `TypeError`             |
| `null`                    | `'null'`         | `0`    | `false` | `TypeError`             |
| `true`                    | `'true'`         | `1`    | `\`     | `new Boolean(true)`     |
| `false`                   | `'false'`        | `0`    | `\`     | `new Boolean(false)`    |
| `''`                      | `\`              | `0`    | `false` | `new String('')`        |
| `'1.2'`                   | `\`              | `1.2`  | `true`  | `new String('1.2')`     |
| `'abc'`                   | `\`              | `NaN`  | `true`  | `new String('abc')`     |
| `0`                       | `'0'`            | `/`    | `false` | `new Number(0)`         |
| `-0`                      | `'0'`            | `/`    | `false` | `new Number(0)`         |
| `NaN`                     | `'NaN'`          | `/`    | `false` | `new Number(NaN)`       |
| `Infinity`                | `'Infinity'`     | `/`    | `true`  | `new Number(Infinity)`  |
| `-Infinity`               | `'-Infinity'`    | `/`    | `true`  | `new Number(-Infinity)` |
| `{} (ä»»æ„å¯¹è±¡)`           | `~`              | `~`    | `true`  | `/`                     |
| `[] (ç©ºæ•°ç»„)`             | `''`             | `0`    | `true`  | `/`                     |
| `[9](æ•°å­—å…ƒç´ )`           | `'9'`            | `9`    | `true`  | `/`                     |
| `['a'](å…¶ä»–æ•°ç»„)`         | `ä½¿ç”¨ join æ–¹æ³•` | `NaN`  | `true`  | `/`                     |
| `function() {}(ä»»æ„å‡½æ•°)` | `~`              | `NaN`  | `true`  | `/`                     |

### æ˜¾ç¤ºç±»å‹è½¬æ¢

- **æ•°å­— è½¬ å­—ç¬¦ä¸²**

  **è¿˜å¯ä»¥ä½¿ç”¨ `toString()` æ–¹æ³•ï¼Œä»–çš„æ‰§è¡Œç»“æœé€šå¸¸å’Œ `String()` æ–¹æ³•ä¸€è‡´ã€‚**

  **`Number` ç±»å‹çš„ `toString()` æ–¹æ³•è¿˜æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šè¦è½¬æ¢çš„è¿›åˆ¶ã€‚**

  ```js
  null.toString(); // Error - ğŸ“ null å’Œ undefined æ²¡æœ‰ toString æ–¹æ³•
  undefined.toString(); // Error
  undefined.toString(); // '123'
  false.toString(); // 'false'
  let n = 20;
  n.toString(2); // äºŒè¿›åˆ¶ - 10100
  n.toString(8); // å…«è¿›åˆ¶ - 24
  n.toString(16); // åå…­è¿›åˆ¶ - 14
  ```

  - **`Number` ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²è¿˜æœ‰ä¸‰ä¸ªæ–¹æ³•**

    **`toFixed()` - å¯æŠŠ `Number` å››èˆäº”å…¥ä¸ºæŒ‡å®šå°æ•°ä½æ•°çš„æ•°å­—ï¼Œè¿”å›`NumberObject`çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼›**

    **`toExponential()` - å¯æŠŠå¯¹è±¡çš„å€¼è½¬æ¢æˆæŒ‡æ•°è®¡æ•°æ³•ï¼›**

    **`toPrecision()` - æŠŠæ•°å­—æ ¼å¼åŒ–ä¸ºæŒ‡å®šçš„é•¿åº¦ï¼Œæ–¹æ³•è¿”å›æŒ‡å®šé•¿åº¦çš„æ•°å€¼å­—ç¬¦ä¸²ï¼›**

- **å¯¹è±¡ è½¬ å­—ç¬¦ä¸²**

  - **`value.toString()`**

  - **`value + ''`**

    > **å…ˆè°ƒç”¨ `valueOf` æ–¹æ³•ï¼Œå¦‚æœæ˜¯åŸå§‹å€¼åˆ™è¿”å›ï¼Œå¦åˆ™è°ƒç”¨ `toString()` æ–¹æ³•ï¼Œå¦‚æœæ˜¯åŸå§‹å€¼ã€‚åˆ™è¿”å›ï¼Œå¦åˆ™æŠ¥é”™`TypeError` ã€‚**

  - **`String(value)`**

    > `String` å’Œç©ºå­—ç¬¦ä¸²å·®ä¸å¤šï¼Œ åªæ˜¯ä¼šä¼˜å…ˆè°ƒç”¨ `toString()` ç„¶å `valueOf` æœ€åéƒ½ä¸è¡ŒæŠ¥é”™ã€‚
    >
    > **`Date` å§‹ç»ˆè°ƒç”¨ `toString` æ–¹æ³•ã€‚**

- **å¯¹è±¡ è½¬ æ•°å€¼**

  - **`+value`**

  - **`Number(value)`**

    > **å…ˆè°ƒç”¨ `valueOf` æ–¹æ³•ï¼Œå¦‚æœæ˜¯åŸå§‹å€¼ï¼Œåˆ™è¿”å›ã€‚å¦åˆ™ï¼Œè°ƒç”¨ `toString()` æ–¹æ³•ï¼Œå°†è¿”å›å€¼è½¬æ¢ä¸ºæ•°å€¼ã€‚**

## ç±»å‹è¯†åˆ«

### `typeof`

**`typeof` åœ¨åˆ¤æ–­å¯¹è±¡ç±»å‹æ—¶æœ‰å±€é™æ€§ã€‚**

å¯ä»¥è¯†åˆ«åŸºç¡€æ•°æ®ç±»å‹ `undefined / boolean / number / string / symbol` å’Œ  `object / function` ã€‚

### `instanceof`

+ `obj instanceof constructor` - åˆ¤æ–­å˜é‡æ˜¯å¦æ˜¯ç»™å®šç±»çš„å®ä¾‹ã€‚

  ```js
  new Date() instanceof Date; // true
  [] instanceof Array; // true
  null instanceof Object; // false
  /\d+/ instanceof RegExp; // false
  ```

- `instanceof` å¯ä»¥è¯†åˆ«è‡ªå®šä¹‰å¯¹è±¡ç±»å‹

  ```js
  function Foo() {}
  function Bar() {}
  Bar.prototype = new Foo();
  new Bar() instanceof Bar; // true
  new Bar() instanceof Foo; // true
  ```


- `instanceof` å¯ä»¥è¯†åˆ«ç»§æ‰¿ç±»å‹

  ```js
  let a = [];
  a instanceof Array; // true
  a instanceof Object; // true
  ```


- `instanceof` æ— æ³•è¯†åˆ«åŸå§‹ç±»å‹

  `instanceof` åªæ˜¯åœ¨åˆ¤æ–­å˜é‡æ˜¯å“ªä¸ªç±»å‹ï¼Œä¸æ˜¯å¾—åˆ°å“ªä¸ªå˜é‡ç±»å‹ã€‚

  ```js
  "123" instanceof String; // false
  123 instanceof Number; // false
  ```

### `constructor.name`

+ `obj.constructor.name` å¯ä»¥æ£€æµ‹å˜é‡çš„æ„é€ å‡½æ•°ã€‚

  ```js
  ({ x: 1 }).constructor.name; // 'Object'
  ([]).constructor.name; // Array
  (new Date()).constructor.name; // Date
  ('').constructor.name; // String
  (true).constructor.name; // Boolean
  (12).constructor.name; // Number
  (null).constructor.name; // Cannot read properties of null (reading 'constructor')
  (undefined).constructor.name; // Cannot read properties of undefined (reading 'constructor')
  ```

+ `obj.constructor.name` å¯ä»¥æ£€æµ‹è‡ªå®šä¹‰ç±»å‹ã€‚

  ```js
  function Foo() {}
  new Foo().constructor.name; // Foo
  ```

- `obj.constructor.name` åœ¨æœ‰åŸå‹çš„æ—¶å€™ä¼šå¤±æ•ˆã€‚

  ```js
  function Foo() {}
  Foo.prototype = {
    method1: function () {},
  };
  new Foo().constructor.name; // Object
  ```


- `obj.constructor.name` åœ¨å¤šé‡ç»§æ‰¿çš„æ—¶å€™ä¼šå¤±æ•ˆã€‚

  ```js
  function a() {}
  function b() {}
  b.prototype = new a(); // b ç»§æ‰¿ a
  let f = new b();
  f.constructor.name === b; // false
  f.constructor.name === a; // true
  ```

### `Object.prototype.toString.call`

**å¯ä»¥æ£€æµ‹å¯¹è±¡çš„å†…éƒ¨å±æ€§ `[[Class]]`**

```js
function getType(o) {
  return Object.prototype.toString.call(o);
}
let d = new Date();
let a = [];
let r = /d+/;
console.log(getType(a)); // [object Array]
console.log(getType(d)); // [object Date]
console.log(getType(r)); // [object RegExp]
```

```js
// åªè¦æˆªå– å­—ç¬¦ä¸² å°±å¯ä»¥ã€‚
function getType(o) {
  return Object.prototype.toString.call(o).slice(8, -1);
  // Array Date RegExp
}

// ä¸‹é¢è¿™ç§æ˜¯åˆ¤æ–­ä¸äº†è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ã€‚
function Foo() {}
console.log(getType(new Foo())); // Object
```

### æ€»ç»“

- **`constructor` å’Œ `instanceof` ä¸å¯ä»¥è·¨ `frame`ï¼Œéœ€è¦åœ¨åŒä¸ª `frame` ä¸­æ‰æœ‰æ•ˆã€‚**

  ```js
  let iframe = document.createElement("iframe");
  document.body.appendChild(iframe);
  xArray = window.frames[window.frames.length - 1].Array;
  let arr = new xArray(1, 2, 3); // [1, 2, 3]
  arr instanceof Array; // false
  arr.constructor === Array; // false
  ```

- **åªæ£€æµ‹ç‰¹å®šçš„å±æ€§ï¼Œå¦‚æœå­˜åœ¨åˆ™è®¤ä¸ºæ˜¯è¯¥ç±»å‹ã€‚**

  ```js
  // æœ‰çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ˜¯è¿™ä¹ˆè¿›è¡Œåˆ¤æ–­çš„ã€‚
  function isArray(object) {
    return (
      object != null &&
      typeof object === "object" &&
      "splice" in object &&
      "join" in object
    );
  }
  
  function isArray(arr) {
    return !!arr && arr.constructor === Array;
  }
  ```

| æ–¹æ³•                            | æ€»ç»“                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| **`typeof`**                    | **æ— æ³•æ£€æµ‹å…·ä½“çš„å¯¹è±¡ç±»å‹ï¼Œé€‚åˆæ£€æµ‹å˜é‡æ˜¯å¦å®šä¹‰ã€‚**           |
| **`instanceof`**                | **æ— æ³•æ£€æµ‹ åŸå§‹ç±»å‹ï¼Œè·¨ `frame` å¤±æ•ˆ**                       |
| **`constructor`**               | **ä¸æ£€æŸ¥åŸå‹é“¾ï¼Œæ— æ³•æ£€æµ‹`null`å’Œ`undefined`ï¼Œè·¨`frame`å¤±æ•ˆï¼Œæœ‰æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼ŒæŸäº›åœºæ™¯ä¸‹å¤±æ•ˆã€‚** |
| **`duck-typing`**               | **ä¸å¯é ï¼ŒæŸäº›åœºæ™¯ä¸‹å¤±æ•ˆã€‚**                                 |
| **`Object.prototype.toString`** | **å¯ä»¥æ£€æµ‹æ‰€æœ‰åŸç”Ÿå¯¹è±¡ï¼Œæ— æ³•è¯†åˆ«è‡ªå®šä¹‰å¯¹è±¡çš„ å…·ä½“ç±»å‹ã€‚**    |

- **å¦‚æœæœ‰åŸç”Ÿæ–¹æ³•ï¼Œ è‚¯å®šæ˜¯è¦ä¼˜å…ˆä½¿ç”¨ã€‚ğŸ“ğŸ“ğŸ“**

  **`Array.isArray();` - æ£€æµ‹æ•°ç»„çš„åŸç”Ÿæ–¹æ³•ã€‚**

  ```js
  // true ğŸ‘‡
  Array.isArray([]); | Array.isArray([1]);
  Array.isArray(new Array());
  Array.isArray(Array.prototype);
  
  // false ğŸ‘‡
  Array.isArray() | Array.isArray({}) | Array.isArray(null) | Array.isArray(undefined)
  Array.isArray(17) | Array.isArray(false) | Array.isArray({ __proto__: Array.prototype })
  ```

- **å…³äº`DOM`å…ƒç´ å’Œå®¿ä¸»å¯¹è±¡çš„æ£€æµ‹ã€‚**

  **æƒ…å†µä¼šæ¯”è¾ƒå¤æ‚ï¼Œå’Œå…·ä½“çš„æµè§ˆå™¨å‚å•†å®ç°æœ‰å¾ˆå¤§å…³ç³»ï¼Œ æœ‰è¾ƒå¤šçš„å…¼å®¹æ€§é—®é¢˜ã€‚**