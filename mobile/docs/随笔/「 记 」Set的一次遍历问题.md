---
title: ã€Œ è®° ã€Setçš„ä¸€æ¬¡éå†é—®é¢˜
date: 2024-07-27
lastUpdated: 2024-07-27
---

# ã€Œ è®° ã€`Set`çš„ä¸€æ¬¡éå†é—®é¢˜

## å‰è¨€

`Set` æ˜¯ä¸€ç§éå¸¸æœ‰è¶£çš„æ•°æ®ç»“æ„ï¼Œå®ƒæœ‰ç‚¹åƒä¸€ä¸ªç‰¹æ®Šçš„æ•°ç»„ï¼Œä½†æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«â€”â€”å®ƒåªä¼šå­˜å‚¨å”¯ä¸€çš„å€¼ã€‚

å¯¹äºå¤„ç†ä¸€å¤§å †é‡å¤æ•°æ®çš„åœºæ™¯æ¥è¯´ï¼Œ`Set` ç®€ç›´æ˜¯ç¥å™¨ã€‚ç„¶è€Œï¼Œå’Œå¾ˆå¤šâ€œç¥å™¨â€ä¸€æ ·ï¼Œå®ƒåœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿä¼šè®©äººå¤´ç–¼ï¼Œæ¯”å¦‚è¿™æ¬¡éå†æ—¶é‡åˆ°çš„ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„å°é—®é¢˜ã€‚

æˆ‘æœ€è¿‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ `Set` è¿›è¡Œéå†æ“ä½œï¼Œç»“æœç«Ÿç„¶åœ¨å¢åˆ å…ƒç´ æ—¶é‡åˆ°äº†æ­»å¾ªç¯ï¼

è¿™ç¯‡æ–‡ç« å°±æ˜¯æƒ³è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å­¦åˆ°çš„ç»éªŒæ•™è®­ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ åœ¨ä½¿ç”¨ `Set` æ—¶å°‘èµ°å¼¯è·¯ã€‚

## é—®é¢˜åœºæ™¯ï¼šéå†ä¸­çš„æ­»å¾ªç¯

+ **ç¤ºä¾‹ä»£ç **

  ```js
  let set = new Set([1]);
  let index = 2;
  
  set.forEach((item) => {
    set.delete(1);
    set.add(1); // -a é€ æˆæ­»å¾ªç¯
    set.add(2); // -b ä¸ä¼šæ­»å¾ªç¯ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼ŸğŸ¤”
    set.add(index++); // -c å†æ¬¡æ­»å¾ªç¯
    console.log('log-content');
  });
  ```

  + `a: set.delete(1); set.add(1);`

  + `b: set.delete(1); set.add(2);`

  + `c: set.delete(1); set.add(index++);`

  åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`a` å’Œ `c` çš„æ“ä½œéƒ½ä¼šå¯¼è‡´æ­»å¾ªç¯ï¼Œè€Œ `b` çš„æ“ä½œåˆ™ä¸ä¼šã€‚è®©æˆ‘ä»¬æ¥è§£å¼€è¿™äº›è°œé¢˜å§ï¼

+ **é—®é¢˜åˆ†æ**

  **ã€Œ ç”±äº `Set` æ•°æ®ç»“æ„æˆå‘˜éƒ½æ˜¯å”¯ä¸€çš„ã€‚ ã€**

  1. `a` çš„è¿™ç§æƒ…å†µï¼Œ `set` ä¸‹æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œä¼šå¯Ÿè§‰è¿˜æœ‰å€¼ï¼Œä¼šé€ æˆæ­»å¾ªç¯ã€‚

     > **`Set.forEach` ä¸ºä»€ä¹ˆä¼šè¿™æ ·å®ç°ï¼Ÿåœ¨æ‰©å±•ä¸­æœ‰è§£é‡Šï¼ˆä»¥åŠä¸ºä»€ä¹ˆï¼‰ã€‚ğŸ‘‡**

  2. `b` çš„è¿™ç§æƒ…å†µï¼Œä¸ä¼šæ­»å¾ªç¯æ˜¯å› ä¸ºã€Œ ç»“æ„æˆå‘˜éƒ½æ˜¯å”¯ä¸€ ã€ã€‚

     æ‰€ä»¥ `log-content` æ‰“å°ä¸¤æ¬¡ï¼Œç¬¬äºŒæ¬¡ `add(2)` æ—¶è§†ä¸ºæ— æ•ˆã€‚

  3. `c` çš„è¿™ç§æƒ…å†µï¼Œå› ä¸ºæ¯æ¬¡æ·»åŠ çš„å€¼éƒ½æ˜¯ä¸åŒçš„ `add(2 -> 3 -> 4 -> 5)`

     å¯¼è‡´æ¯æ¬¡éå†æ—¶ `Set` éƒ½ä¼šæ·»åŠ æ–°å…ƒç´ ï¼Œæœ€ç»ˆå¼•å‘æ­»å¾ªç¯ã€‚

+ **`forEach` æ— æ³•ä¸­é€”è·³å‡ºçš„é™·é˜±**

  åœ¨è°ƒè¯•æ—¶ï¼Œæˆ‘å°è¯•ä½¿ç”¨ `forEach` è¿›è¡Œå¾ªç¯æ“ä½œï¼Œå´å‘ç° `return` å¹¶ä¸èƒ½ç»ˆæ­¢æ•´ä¸ªå¾ªç¯ã€‚

  ä¸ºäº†è®°å½•è¿™ä¸€ç‚¹ï¼Œç‰¹æ­¤è¯´æ˜ `forEach` è·³å‡ºå¾ªç¯çš„é—®é¢˜ã€‚

  + ä½¿ç”¨ `return` åªèƒ½è·³å‡ºå½“å‰å¾ªç¯ï¼Œç±»ä¼¼äº `continue` çš„æ•ˆæœï¼Œä½†ä¸èƒ½ç»ˆæ­¢æ•´ä¸ªå¾ªç¯ã€‚
  + `forEach` ä¸æ”¯æŒä½¿ç”¨ `continue` å’Œ `break` æ¥è·³å‡ºå¾ªç¯ï¼Œå°è¯•ä½¿ç”¨å°†ä¼šæŠ¥é”™ã€‚
  + å¯ä»¥é€šè¿‡ `try-catch` æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼æ¥è·³å‡ºå¾ªç¯ï¼Œä½†è¿™å°±å±äºåæ–¹äº†ã€‚

  **è¿™ä¹Ÿæ˜¯ç”±äº `forEach` æ˜¯ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½¢æˆäº†ä¸€ä¸ªä½œç”¨åŸŸï¼Œå› æ­¤å¿…é¡»éå†æ‰€æœ‰çš„æ•°æ®æ‰èƒ½ç»“æŸå¾ªç¯ã€‚**

  > ä¹Ÿå°±æ„å‘³ç€ `forEach` å†…éƒ¨å®šä¹‰çš„å˜é‡ä¸ä¼šåƒ `for` å¾ªç¯é‚£æ ·æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚

## æ‰©å±•ï¼š`Object/Array` çš„è¡¨ç°

ç›¸æ¯” `Set`ï¼Œåœ¨ `Object` å’Œ `Array` ä¸Šåšç±»ä¼¼æ“ä½œæ—¶ï¼Œæƒ…å†µä¼šç®€å•å¾—å¤šã€‚

`Object` å’Œ `Array` çš„éå†æ“ä½œä¸­ï¼ŒåŸºæœ¬ä¸ä¼šé‡åˆ°ç±»ä¼¼çš„æ­»å¾ªç¯é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬çš„éå†æœºåˆ¶ä¸åŒã€‚

```js
let obj = { a: 1 },
  arr = [1];

for (let key in obj) {
  obj[index++] = index; 
  console.log("key-", key); // åªæ‰“å°ä¸€æ¬¡ key- a
}

arr.forEach((_item) => {
  console.log("_item-", _item); // åªæ‰“å°ä¸€æ¬¡ _item- 1
});
```

åœ¨ `Object` ä¸­ï¼Œä½ å¯ä»¥æ”¾å¿ƒåœ°åœ¨å¾ªç¯ä¸­æ·»åŠ æ–°å±æ€§ï¼Œå› ä¸ºå®ƒä¸ä¼šå½±å“å½“å‰å¾ªç¯çš„è¿›ç¨‹ã€‚

åŒæ ·ï¼Œåœ¨ `Array` ä¸­ï¼Œå³ä½¿ä½ åœ¨ `forEach` ä¸­æ”¹å˜äº†æ•°ç»„çš„å†…å®¹ï¼Œå¾ªç¯ä¹Ÿä¸ä¼šè¢«å¹²æ‰°ã€‚

## `Array vs Setï¼šforEach` æ–¹æ³•çš„åŒºåˆ«

> `Array/Object` å’Œ `Set`åœ¨éå†è¿‡ç¨‹ä¸­çš„è¡¨ç°ä¸ºä»€ä¹ˆä¸ä¸€è‡´ï¼Ÿ
>
> åŸå› å¦‚ä¸‹ï¼šğŸ‘‡

- [`Array_forEach`å®šä¹‰](https://tc39.es/ecma262/#sec-array.prototype.foreach)

  **`Array_forEach`æ˜¯ã€Œ é¦–å…ˆè·å–äº†`Array`çš„é•¿åº¦ ğŸ“ ã€ï¼Œç„¶åä½¿ç”¨å¾ªç¯è®¿é—®æ¯ä¸ªå…ƒç´ ã€‚**

  **æ‰€ä»¥ä¸æ˜¯è¯´æ–°æ’å…¥çš„å…ƒç´ ä¸è®¿é—®ï¼Œè€Œæ˜¯å› ä¸ºæ’å…¥çš„ä½ç½®è¶…è¿‡äº†`forEach`æ‰§è¡Œæ—¶çš„æ•°ç»„å¤§å°ã€‚ğŸ˜¯**

  ```js
  let arr_1 = [1, 2];
  arr_1.forEach((_item_1) => {
    // æ‰“å° 1ã€5 -- ğŸ‘† éªŒè¯äº†ä¸Šé¢è¯´æ³•~
    console.log("_item_1", _item_1);
    arr_1.pop();
    arr_1.push(5);
  });
  ```
  
- [`Set_forEach`å®šä¹‰](https://tc39.es/ecma262/#sec-set.prototype.foreach)

  **`Set_forEach`æ˜¯ã€Œ æŒ‰ç…§æ’å…¥é¡ºåºä¾æ¬¡è®¿é—®å„ä¸ªå…ƒç´  ğŸ“ğŸ“ğŸ“ ã€ã€‚**

  **è€Œä¸”æ˜ç¡®çº¦å®šäº†ï¼Œåœ¨`forEach`å¼€å§‹æ‰§è¡Œä¹‹åæ’å…¥çš„å…ƒç´ ä¹Ÿè¦è¢«è®¿é—®ã€‚**

  `Set numEntries to the number of elements of entries.` - æ˜¯`ECMA`ä¸­å¯¹äº`Set_forEach`çš„æè¿°ã€‚