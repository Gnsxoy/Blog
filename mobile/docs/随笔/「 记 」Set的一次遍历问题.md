---
title: ã€Œ è®° ã€Setçš„ä¸€æ¬¡éåŽ†é—®é¢˜
date: 2024-07-27
lastUpdated: 2024-07-27
---

# ã€Œ è®° ã€`Set`çš„ä¸€æ¬¡éåŽ†é—®é¢˜

## å‰è¨€

`Set` æ˜¯ä¸€ç§éžå¸¸æœ‰è¶£çš„æ•°æ®ç»“æž„ï¼Œå®ƒæœ‰ç‚¹åƒä¸€ä¸ªç‰¹æ®Šçš„æ•°ç»„ï¼Œä½†æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«â€”â€”å®ƒåªä¼šå­˜å‚¨å”¯ä¸€çš„å€¼ã€‚

å¯¹äºŽå¤„ç†ä¸€å¤§å †é‡å¤æ•°æ®çš„åœºæ™¯æ¥è¯´ï¼Œ`Set` ç®€ç›´æ˜¯ç¥žå™¨ã€‚ç„¶è€Œï¼Œå’Œå¾ˆå¤šâ€œç¥žå™¨â€ä¸€æ ·ï¼Œå®ƒåœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿä¼šè®©äººå¤´ç–¼ï¼Œæ¯”å¦‚è¿™æ¬¡éåŽ†æ—¶é‡åˆ°çš„ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„å°é—®é¢˜ã€‚

æˆ‘æœ€è¿‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ `Set` è¿›è¡ŒéåŽ†æ“ä½œï¼Œç»“æžœç«Ÿç„¶åœ¨å¢žåˆ å…ƒç´ æ—¶é‡åˆ°äº†æ­»å¾ªçŽ¯ï¼

è¿™ç¯‡æ–‡ç« å°±æ˜¯æƒ³è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å­¦åˆ°çš„ç»éªŒæ•™è®­ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ åœ¨ä½¿ç”¨ `Set` æ—¶å°‘èµ°å¼¯è·¯ã€‚

## é—®é¢˜åœºæ™¯ï¼šéåŽ†ä¸­çš„æ­»å¾ªçŽ¯

+ **ç¤ºä¾‹ä»£ç **

  ```js
  let set = new Set([1]);
  let index = 2;
  
  set.forEach((item) => {
    set.delete(1);
    set.add(1); // -a é€ æˆæ­»å¾ªçŽ¯
    set.add(2); // -b ä¸ä¼šæ­»å¾ªçŽ¯ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼ŸðŸ¤”
    set.add(index++); // -c å†æ¬¡æ­»å¾ªçŽ¯
    console.log('log-content');
  });
  ```

  + `a: set.delete(1); set.add(1);`

  + `b: set.delete(1); set.add(2);`

  + `c: set.delete(1); set.add(index++);`

  åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`a` å’Œ `c` çš„æ“ä½œéƒ½ä¼šå¯¼è‡´æ­»å¾ªçŽ¯ï¼Œè€Œ `b` çš„æ“ä½œåˆ™ä¸ä¼šã€‚è®©æˆ‘ä»¬æ¥è§£å¼€è¿™äº›è°œé¢˜å§ï¼

+ **é—®é¢˜åˆ†æž**

  **ã€Œ ç”±äºŽ `Set` æ•°æ®ç»“æž„æˆå‘˜éƒ½æ˜¯å”¯ä¸€çš„ã€‚ ã€**

  1. `a` çš„è¿™ç§æƒ…å†µï¼Œ `set` ä¸‹æ¬¡å¾ªçŽ¯çš„æ—¶å€™ï¼Œä¼šå¯Ÿè§‰è¿˜æœ‰å€¼ï¼Œä¼šé€ æˆæ­»å¾ªçŽ¯ã€‚

     > **`Set.forEach` ä¸ºä»€ä¹ˆä¼šè¿™æ ·å®žçŽ°ï¼Ÿåœ¨æ‰©å±•ä¸­æœ‰è§£é‡Šï¼ˆä»¥åŠä¸ºä»€ä¹ˆï¼‰ã€‚ðŸ‘‡**

  2. `b` çš„è¿™ç§æƒ…å†µï¼Œä¸ä¼šæ­»å¾ªçŽ¯æ˜¯å› ä¸ºã€Œ ç»“æž„æˆå‘˜éƒ½æ˜¯å”¯ä¸€ ã€ã€‚

     æ‰€ä»¥ `log-content` æ‰“å°ä¸¤æ¬¡ï¼Œç¬¬äºŒæ¬¡ `add(2)` æ—¶è§†ä¸ºæ— æ•ˆã€‚

  3. `c` çš„è¿™ç§æƒ…å†µï¼Œå› ä¸ºæ¯æ¬¡æ·»åŠ çš„å€¼éƒ½æ˜¯ä¸åŒçš„ `add(2 -> 3 -> 4 -> 5)`

     å¯¼è‡´æ¯æ¬¡éåŽ†æ—¶ `Set` éƒ½ä¼šæ·»åŠ æ–°å…ƒç´ ï¼Œæœ€ç»ˆå¼•å‘æ­»å¾ªçŽ¯ã€‚

+ **`forEach` æ— æ³•ä¸­é€”è·³å‡ºçš„é™·é˜±**

  åœ¨è°ƒè¯•æ—¶ï¼Œæˆ‘å°è¯•ä½¿ç”¨ `forEach` è¿›è¡Œå¾ªçŽ¯æ“ä½œï¼Œå´å‘çŽ° `return` å¹¶ä¸èƒ½ç»ˆæ­¢æ•´ä¸ªå¾ªçŽ¯ã€‚

  ä¸ºäº†è®°å½•è¿™ä¸€ç‚¹ï¼Œç‰¹æ­¤è¯´æ˜Ž `forEach` è·³å‡ºå¾ªçŽ¯çš„é—®é¢˜ã€‚

  + ä½¿ç”¨ `return` åªèƒ½è·³å‡ºå½“å‰å¾ªçŽ¯ï¼Œç±»ä¼¼äºŽ `continue` çš„æ•ˆæžœï¼Œä½†ä¸èƒ½ç»ˆæ­¢æ•´ä¸ªå¾ªçŽ¯ã€‚
  + `forEach` ä¸æ”¯æŒä½¿ç”¨ `continue` å’Œ `break` æ¥è·³å‡ºå¾ªçŽ¯ï¼Œå°è¯•ä½¿ç”¨å°†ä¼šæŠ¥é”™ã€‚
  + å¯ä»¥é€šè¿‡ `try-catch` æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼æ¥è·³å‡ºå¾ªçŽ¯ï¼Œä½†è¿™å°±å±žäºŽåæ–¹äº†ã€‚

  **è¿™ä¹Ÿæ˜¯ç”±äºŽ `forEach` æ˜¯ä¼ å…¥ä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œå½¢æˆäº†ä¸€ä¸ªä½œç”¨åŸŸï¼Œå› æ­¤å¿…é¡»éåŽ†æ‰€æœ‰çš„æ•°æ®æ‰èƒ½ç»“æŸå¾ªçŽ¯ã€‚**

  > ä¹Ÿå°±æ„å‘³ç€ `forEach` å†…éƒ¨å®šä¹‰çš„å˜é‡ä¸ä¼šåƒ `for` å¾ªçŽ¯é‚£æ ·æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚

## æ‰©å±•ï¼š`Object/Array` çš„è¡¨çŽ°

ç›¸æ¯” `Set`ï¼Œåœ¨ `Object` å’Œ `Array` ä¸Šåšç±»ä¼¼æ“ä½œæ—¶ï¼Œæƒ…å†µä¼šç®€å•å¾—å¤šã€‚

`Object` å’Œ `Array` çš„éåŽ†æ“ä½œä¸­ï¼ŒåŸºæœ¬ä¸ä¼šé‡åˆ°ç±»ä¼¼çš„æ­»å¾ªçŽ¯é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬çš„éåŽ†æœºåˆ¶ä¸åŒã€‚

```js
let obj = { a: 1 },
  arr = [1];

for (let key in obj) {
  obj[index++] = index; 
  console.log("key-", key); // åªæ‰“å°ä¸€æ¬¡ key- a
}

arr.forEach((_item, _index) => {
	arr[_index+1] = _index;
  console.log("_item-", _item); // åªæ‰“å°ä¸€æ¬¡ _item- 1
});
```

åœ¨ `Object` ä¸­ï¼Œä½ å¯ä»¥æ”¾å¿ƒåœ°åœ¨å¾ªçŽ¯ä¸­æ·»åŠ æ–°å±žæ€§ï¼Œå› ä¸ºå®ƒä¸ä¼šå½±å“å½“å‰å¾ªçŽ¯çš„è¿›ç¨‹ã€‚

åŒæ ·ï¼Œåœ¨ `Array` ä¸­ï¼Œå³ä½¿ä½ åœ¨ `forEach` ä¸­æ”¹å˜äº†æ•°ç»„çš„å†…å®¹ï¼Œå¾ªçŽ¯ä¹Ÿä¸ä¼šè¢«å¹²æ‰°ã€‚

## `Array vs Setï¼šforEach` æ–¹æ³•çš„åŒºåˆ«

> `Array/Object` å’Œ `Set`åœ¨éåŽ†è¿‡ç¨‹ä¸­çš„è¡¨çŽ°ä¸ºä»€ä¹ˆä¸ä¸€è‡´ï¼Ÿ
>
> åŽŸå› å¦‚ä¸‹ï¼šðŸ‘‡

- [`Array_forEach`å®šä¹‰](https://tc39.es/ecma262/#sec-array.prototype.foreach)

  1. **`Array_forEach`æ˜¯ã€Œ é¦–å…ˆèŽ·å–äº†`Array`çš„åˆå§‹é•¿åº¦ ðŸ“ ã€ï¼Œå¹¶åŸºäºŽè¿™ä¸ªé•¿åº¦è¿›è¡Œè¿­ä»£ã€‚**
  2. å®ƒä¸ä¼šæå‰ç¼“å­˜æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè€Œæ˜¯æ ¹æ®åˆå§‹é•¿åº¦é€ä¸ªè®¿é—®æ¯ä¸ªç´¢å¼•ä½ç½®çš„å…ƒç´ ã€‚
  
  > ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœåœ¨è¿­ä»£è¿‡ç¨‹ä¸­æ•°ç»„é•¿åº¦å‘ç”Ÿå˜åŒ–ï¼Œ`forEach` ä»ç„¶ä¼šæŒ‰ç…§æœ€åˆçš„é•¿åº¦è¿›è¡Œè¿­ä»£ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ä½ æ·»åŠ å…ƒç´ åˆ°æ•°ç»„çš„å°¾éƒ¨æ—¶ï¼Œå®ƒä»¬ä¸ä¼šè¢«è®¿é—®çš„åŽŸå› ã€‚
  >
  > å¦‚æžœæ’å…¥å…ƒç´ çš„ä½ç½®è¶…è¿‡äº†æœ€åˆçš„æ•°ç»„å¤§å°ï¼Œ`forEach` ä¹Ÿä¸ä¼šè®¿é—®è¿™äº›æ–°å…ƒç´ ã€‚
  
  **æ‰€ä»¥ä¸æ˜¯è¯´æ–°æ’å…¥çš„å…ƒç´ ä¸è®¿é—®ï¼Œè€Œæ˜¯åœ¨éåŽ†å¼€å§‹æ—¶è®°å½•åˆå§‹é•¿åº¦ï¼Œæ–°å¢žçš„å…ƒç´ å¦‚æžœè¶…è¿‡åˆå§‹é•¿åº¦ï¼Œå°±ä¸ä¼šè¢«è®¿é—®ã€‚ðŸ˜¯**
  
  > å¯¹äºŽæ•°ç»„ï¼Œ`forEach` åœ¨éåŽ†æœŸé—´çš„ä»»ä½•æ“ä½œï¼ˆå¦‚ `pop / push`ï¼‰éƒ½ä¸ä¼šå½±å“å·²ç»ç¡®å®šçš„è¿­ä»£æ¬¡æ•°ï¼Œåªä¼šå½±å“è®¿é—®çš„å…ƒç´ ã€‚
  
  ```js
  let arr_1 = [1, 2];
  arr_1.forEach((_item_1) => {
    // æ‰“å° 1ã€5 -- ðŸ‘† éªŒè¯äº†ä¸Šé¢è¯´æ³•~
    console.log("_item_1", _item_1);
    arr_1.pop();
    arr_1.push(5);
  });
  ```
  
- [`Set_forEach`å®šä¹‰](https://tc39.es/ecma262/#sec-set.prototype.foreach)

  **`Set_forEach`æ˜¯ã€Œ æŒ‰ç…§æ’å…¥é¡ºåºä¾æ¬¡è®¿é—®å„ä¸ªå…ƒç´  ðŸ“ ã€ã€‚**

  **è€Œä¸”æ˜Žç¡®çº¦å®šäº†ï¼Œåœ¨`forEach`æ‰§è¡ŒæœŸé—´æ’å…¥çš„å…ƒç´ ä¹Ÿä¼šè¢«éåŽ†åˆ°ã€‚**

  `Set numEntries to the number of elements of entries.` - æ˜¯`ECMA`ä¸­å¯¹äºŽ`Set_forEach`çš„æè¿°ã€‚
  
  > å¯¹äºŽ `Set`ï¼Œå› ä¸ºæ˜¯æŒ‰æ’å…¥é¡ºåºéåŽ†ï¼Œæ‰€ä»¥åœ¨éåŽ†è¿‡ç¨‹ä¸­æ’å…¥çš„å…ƒç´ ä¼šç»§ç»­è¢«éåŽ†ã€‚

---

### æ‰©å±• - `Array.forEach & Array.splice`

```js
// ä¸æ˜¯è¯´ä¼šè®°å½•æ•°ç»„çš„åˆå§‹é•¿åº¦å—ï¼ŸðŸ¤” - ä¸ºä»€ä¹ˆä¸æ˜¯éƒ½è¢«åˆ é™¤äº†å‘¢ï¼Ÿ
const arr = [1, 2, 3, 11, 22, 33];
arr.forEach((item, idx) => {
    arr.splice(idx, 1);
});
arr; // [2, 11, 33]

// ä»¥åŠ
const arr = [1, 2, 3, 11, 22, 33];
arr.forEach((item, idx) => {
	console.log(item);
	arr.pop();
}); // æ‰“å°ä¸‰æ¬¡ 1 2 3
```

å› ä¸º `splice` æ“ä½œæ”¹å˜äº†æ•°ç»„çš„é•¿åº¦å’Œå…ƒç´ çš„ç´¢å¼•ï¼Œå½±å“äº† `forEach` çš„è¿­ä»£è¡Œä¸ºã€‚

1. **åˆå§‹è¿­ä»£è®¾ç½®ï¼š**

   å½“ `forEach` å¼€å§‹æ—¶ï¼Œå®ƒä¼šè®°å½•æ•°ç»„çš„åˆå§‹é•¿åº¦ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆå§‹é•¿åº¦æ˜¯ `6`ï¼Œå³ `[1, 2, 3, 11, 22, 33]`ã€‚

2. **è¿­ä»£é¡ºåºä¸Žç´¢å¼•è°ƒæ•´ï¼š**

   åœ¨ç¬¬ä¸€ä¸ªè¿­ä»£ä¸­ `idx = 0, arr.splice(0, 1)` åˆ é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´  `1`ï¼Œæ•°ç»„å˜ä¸º `[2, 3, 11, 22, 33]`ã€‚

   çŽ°åœ¨ï¼Œ`forEach` çš„ä¸‹ä¸€æ¬¡è¿­ä»£ä¼šä½¿ç”¨ `idx = 1`ï¼Œè®¿é—®çš„æ˜¯æ–°æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´  `3`ï¼ˆåŽŸæ•°ç»„çš„ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼‰ï¼Œè€Œ `2` è¢«è·³è¿‡äº†ã€‚

3. **æŒç»­çš„é”™ä½ï¼š**

   æ¯æ¬¡åˆ é™¤æ“ä½œéƒ½ä¼šå‡å°‘æ•°ç»„çš„é•¿åº¦å¹¶æ”¹å˜åŽç»­å…ƒç´ çš„ç´¢å¼•ã€‚

   ç”±äºŽ `forEach` ä½¿ç”¨åˆå§‹çš„ç´¢å¼•é¡ºåºï¼Œå¹¶ä¸”ç´¢å¼•æ˜¯åŸºäºŽç§»é™¤å‰çš„æ•°ç»„çŠ¶æ€è®¾ç½®çš„ï¼ŒåŽé¢çš„å…ƒç´ ä¼šè¢«è·³è¿‡ï¼Œæ— æ³•åˆ é™¤æ‰€æœ‰å…ƒç´ ã€‚

**ç”±äºŽ `forEach` æ˜¯åŸºäºŽåˆå§‹ç´¢å¼•é¡ºåºè¿­ä»£çš„ï¼Œè€Œ `splice/pop` æ“ä½œä¼šå½±å“æ•°ç»„çš„ç´¢å¼•å’Œé•¿åº¦ï¼Œå› æ­¤ä¼šå¯¼è‡´ä¸€äº›å…ƒç´ è¢«è·³è¿‡ã€‚ðŸ“**

> å›žç­”ä¸Šé¢ðŸ‘†çš„é—®é¢˜ï¼Œå› ä¸ºç›´æŽ¥ä¿®æ”¹äº† æ•°ç»„çš„é•¿åº¦å’Œç´¢å¼•ï¼Œå¯¼è‡´ä¸€äº›å…ƒç´ è¢«è·³è¿‡ã€‚ ã€ åå¤æç¤º~ ã€‘
>
> æ‰€ä»¥ç±»ä¼¼ `spliceã€pushã€popã€shiftã€unshiftã€reverseã€sortã€fill` è¿™äº›èƒ½ç›´æŽ¥ä¿®æ”¹åŽŸæ•°ç»„çš„æ–¹æ³•éƒ½ä¼šæœ‰ä¸€å®šå½±å“ã€‚

**è¿™ç§è¡Œä¸ºä½¿å¾—åœ¨ä½¿ç”¨ `forEach` æ—¶ç›´æŽ¥ä¿®æ”¹æ•°ç»„ï¼ˆç‰¹åˆ«æ˜¯åˆ é™¤æˆ–æ·»åŠ å…ƒç´ ï¼‰å®¹æ˜“å¯¼è‡´æ„å¤–çš„ç»“æžœã€‚**

#### å¦‚ä½•é¿å…è¿™ç§é—®é¢˜

1. **é€†åºéåŽ†**

   ä»Žæ•°ç»„æœ«å°¾å¼€å§‹éåŽ†å’Œåˆ é™¤ï¼Œè¿™æ ·ä¸ä¼šå½±å“åŽç»­å…ƒç´ çš„ç´¢å¼•ã€‚

   ```js
   const arr = [1, 2, 3, 11, 22, 33];
   for (let i = arr.length - 1; i >= 0; i--) {
       arr.splice(i, 1);
   }
   ```

2. ä½¿ç”¨ `filter` ç”Ÿæˆæ–°æ•°ç»„

   å¦‚æžœåˆ é™¤æ˜¯åŸºäºŽæŸç§æ¡ä»¶ï¼Œä½¿ç”¨ filter åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè€Œä¸æ˜¯ç›´æŽ¥ä¿®æ”¹åŽŸæ•°ç»„ã€‚

   ```js
   let arr = [1, 2, 3, 11, 22, 33];
   arr = arr.filter(item => false); // æ¸…ç©ºæ•°ç»„
   ```